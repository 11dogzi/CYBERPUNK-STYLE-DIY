<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberpunkæ ‡é¢˜ç”Ÿæˆå™¨</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #1e1e1e;
            color: #ffffff;
        }
        .container {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        h1 {
            color: #90ffe0;
            text-align: center;
            margin-bottom: 30px;
        }
        .upload-area {
            border: 2px dashed #555;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            background: #333;
            transition: background 0.3s;
        }
        .upload-area:hover {
            background: #444;
            border-color: #90ffe0;
        }
        .upload-area.dragover {
            background: #444;
            border-color: #90ffe0;
        }
        #imageInput {
            display: none;
        }
        .upload-btn {
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
        }
        .upload-btn:hover {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
        }
        .image-preview {
            margin: 20px 0;
            text-align: center;
        }
        .image-preview-container {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            border: 1px solid #555;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        .image-preview img {
            position: absolute;
            right: 0;
            bottom: 0;
            width: auto;
            height: auto;
            max-width: none;
            max-height: none;
            border: none;
            border-radius: 0;
            object-fit: none;
            object-position: bottom right;
            transform: none;
        }
        .image-info {
            margin: 10px 0;
            padding: 10px;
            background: #333;
            border-radius: 5px;
            font-family: monospace;
        }
        .output-area {
            margin-top: 20px;
        }
        .code-output {
            background: #1a1a1a;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .copy-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .copy-btn:hover {
            background: #45a049;
        }
        .instructions {
            background: #2a4a4a;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #90ffe0;
        }
        .instructions h3 {
            color: #90ffe0;
            margin-top: 0;
        }
        .language-selector {
            text-align: center;
            margin-bottom: 20px;
        }
        .lang-btn {
            background: #444;
            color: #fff;
            border: 1px solid #666;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .lang-btn:hover {
            background: #555;
        }
        .lang-btn.active {
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            border-color: #90ffe0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="language-selector">
            <button class="lang-btn active" onclick="switchLanguage('zh')" id="btn-zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
            <button class="lang-btn" onclick="switchLanguage('en')" id="btn-en">ğŸ‡ºğŸ‡¸ English</button>
        </div>
        <h1 id="main-title">ğŸ¨ Cyberpunkæ ‡é¢˜ç”Ÿæˆå™¨</h1>
        <div class="instructions">
            <h3 id="instructions-title">ä½¿ç”¨è¯´æ˜ï¼š</h3>
            <ol id="instructions-list">
                <li id="instruction-1">ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æˆ–æ‹–æ‹½PNGå›¾åƒæ–‡ä»¶åˆ°è™šçº¿æ¡†å†…</li>
                <li id="instruction-2">ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆbase64ç¼–ç å’Œå¯¹åº”çš„JSä»£ç </li>
                <li id="instruction-3">å¤åˆ¶ç”Ÿæˆçš„ä»£ç å¹¶ç²˜è´´åˆ° <code>titleImages.js</code> æ–‡ä»¶ä¸­</li>
                <li id="instruction-4">ä¿å­˜æ–‡ä»¶åé‡æ–°åŠ è½½ComfyUIå³å¯ä½¿ç”¨æ–°å›¾åƒ</li>
            </ol>
        </div>
                <div class="upload-area" id="uploadArea">
            <p id="upload-text">ç‚¹å‡»æŒ‰é’®é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½PNGå›¾åƒåˆ°æ­¤å¤„</p>
            <button class="upload-btn" onclick="document.getElementById('imageInput').click()" id="upload-btn">
                ğŸ“ <span id="upload-btn-text">é€‰æ‹©å›¾åƒæ–‡ä»¶</span>
            </button>
            <input type="file" id="imageInput" accept=".png,.jpg,.jpeg,.gif" multiple>
        </div>
        <div class="instructions" style="margin-top: 20px;">
            <h3 id="theme-name-title">ğŸ·ï¸ ä¸»é¢˜åç§°è®¾ç½®</h3>
            <p id="theme-name-desc">ä¸ºè½¬æ¢çš„å›¾åƒæŒ‡å®šè‡ªå®šä¹‰ä¸»é¢˜åç§°</p>
            <div style="margin: 15px 0;">
                <label for="themeNameInput" id="theme-name-label" style="display: block; margin-bottom: 8px; color: #90ffe0; font-weight: bold;">ä¸»é¢˜åç§°ï¼š</label>
                <input type="text" id="themeNameInput" placeholder="è¯·è¾“å…¥ä¸»é¢˜åç§°ï¼Œå¦‚ï¼šç§‘æŠ€é£æ ¼" style="width: 100%; padding: 10px; border: 1px solid #555; border-radius: 5px; background: #333; color: #fff; font-size: 14px;" maxlength="50">
                <small id="theme-name-hint" style="color: #888; font-size: 12px; display: block; margin-top: 5px;">ğŸ’¡ ç•™ç©ºå°†ä½¿ç”¨æ–‡ä»¶åä½œä¸ºä¸»é¢˜åç§°</small>
            </div>
        </div>
        <div id="results"></div>
    </div>
    <script>
        const LANGUAGE_TEXTS = {
            zh: {
                mainTitle: 'ğŸ¨ Cyberpunkæ ‡é¢˜ç”Ÿæˆå™¨',
                instructionsTitle: 'ä½¿ç”¨è¯´æ˜ï¼š',
                instruction1: 'ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æˆ–æ‹–æ‹½PNGå›¾åƒæ–‡ä»¶åˆ°è™šçº¿æ¡†å†…',
                instruction2: 'ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆbase64ç¼–ç å’Œå¯¹åº”çš„JSä»£ç ',
                instruction3: 'å¤åˆ¶ç”Ÿæˆçš„ä»£ç å¹¶ç²˜è´´åˆ° titleImages.js æ–‡ä»¶ä¸­',
                instruction4: 'ä¿å­˜æ–‡ä»¶åé‡æ–°åŠ è½½ComfyUIå³å¯ä½¿ç”¨æ–°å›¾åƒ',
                uploadText: 'ç‚¹å‡»æŒ‰é’®é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½PNGå›¾åƒåˆ°æ­¤å¤„',
                uploadBtnText: 'é€‰æ‹©å›¾åƒæ–‡ä»¶',
                fileSize: 'æ–‡ä»¶å¤§å°',
                fileType: 'æ–‡ä»¶ç±»å‹',
                generatedCode: 'ğŸ“‹ ç”Ÿæˆçš„JSä»£ç ï¼š',
                copyCode: 'å¤åˆ¶ä»£ç ',
                copied: 'âœ… å·²å¤åˆ¶',
                copyHint: 'ğŸ’¡ è¯·å°†ä¸Šè¿°ä»£ç ä¸­çš„æ¡ç›®å¤åˆ¶å¹¶æ·»åŠ åˆ° titleImages.js æ–‡ä»¶çš„ TITLE_IMAGES å¯¹è±¡ä¸­',
                copyFailed: 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©ä»£ç å¤åˆ¶',
                themeNameTitle: 'ğŸ·ï¸ ä¸»é¢˜åç§°è®¾ç½®',
                themeNameDesc: 'ä¸ºè½¬æ¢çš„å›¾åƒæŒ‡å®šè‡ªå®šä¹‰ä¸»é¢˜åç§°',
                themeNameLabel: 'ä¸»é¢˜åç§°ï¼š',
                themeNamePlaceholder: 'è¯·è¾“å…¥ä¸»é¢˜åç§°ï¼Œå¦‚ï¼šç§‘æŠ€é£æ ¼',
                themeNameHint: 'ğŸ’¡ ç•™ç©ºå°†ä½¿ç”¨æ–‡ä»¶åä½œä¸ºä¸»é¢˜åç§°'
            },
            en: {
                mainTitle: 'ğŸ¨ Cyberpunk Title Generator',
                instructionsTitle: 'Instructions:',
                instruction1: 'Click upload button or drag PNG image files to the dashed area',
                instruction2: 'System will automatically generate base64 encoding and corresponding JS code',
                instruction3: 'Copy the generated code and paste it into the titleImages.js file',
                instruction4: 'Save the file and reload ComfyUI to use the new images',
                uploadText: 'Click button to select files or drag PNG images here',
                uploadBtnText: 'Select Image Files',
                fileSize: 'File Size',
                fileType: 'File Type',
                generatedCode: 'ğŸ“‹ Generated JS Code:',
                copyCode: 'Copy Code',
                copied: 'âœ… Copied',
                copyHint: 'ğŸ’¡ Please copy the above code entry and add it to the TITLE_IMAGES object in titleImages.js file',
                copyFailed: 'Copy failed, please manually select and copy the code',
                themeNameTitle: 'ğŸ·ï¸ Theme Name Settings',
                themeNameDesc: 'Specify a custom theme name for the converted image',
                themeNameLabel: 'Theme Name:',
                themeNamePlaceholder: 'Enter theme name, e.g.: Tech Style',
                themeNameHint: 'ğŸ’¡ Leave empty to use filename as theme name'
            }
        };
        let currentLanguage = 'zh';
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');
            updatePageTexts();
            updateExistingResults();
        }
        function updatePageTexts() {
            const texts = LANGUAGE_TEXTS[currentLanguage];
            document.title = texts.mainTitle.replace('ğŸ¨ ', '');
            document.getElementById('main-title').textContent = texts.mainTitle;
            document.getElementById('instructions-title').textContent = texts.instructionsTitle;
            document.getElementById('instruction-1').textContent = texts.instruction1;
            document.getElementById('instruction-2').textContent = texts.instruction2;
            document.getElementById('instruction-3').innerHTML = texts.instruction3.replace('titleImages.js', '<code>titleImages.js</code>');
            document.getElementById('instruction-4').textContent = texts.instruction4;
            document.getElementById('upload-text').textContent = texts.uploadText;
            document.getElementById('upload-btn-text').textContent = texts.uploadBtnText;
            document.getElementById('theme-name-title').textContent = texts.themeNameTitle;
            document.getElementById('theme-name-desc').textContent = texts.themeNameDesc;
            document.getElementById('theme-name-label').textContent = texts.themeNameLabel;
            document.getElementById('themeNameInput').placeholder = texts.themeNamePlaceholder;
            document.getElementById('theme-name-hint').textContent = texts.themeNameHint;
        }
        function updateExistingResults() {
            const codeHeaders = document.querySelectorAll('.code-header');
            const copyBtns = document.querySelectorAll('.copy-btn');
            const fileInfos = document.querySelectorAll('.file-info');
            const copyHints = document.querySelectorAll('.copy-hint');
            const texts = LANGUAGE_TEXTS[currentLanguage];
            codeHeaders.forEach(header => {
                header.textContent = texts.generatedCode;
            });
            copyBtns.forEach(btn => {
                if (!btn.classList.contains('copied')) {
                    btn.textContent = texts.copyCode;
                }
            });
            copyHints.forEach(hint => {
                const imageName = hint.dataset.imageName || '';
                hint.innerHTML = texts.copyHint.replace('æ¡ç›®', `'${imageName}' ${currentLanguage === 'zh' ? 'æ¡ç›®' : 'entry'}`);
            });
        }
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        const results = document.getElementById('results');
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            handleFiles(files);
        });
        imageInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
        function handleFiles(files) {
            results.innerHTML = '';
            const themeNameInput = document.getElementById('themeNameInput');
            const texts = LANGUAGE_TEXTS[currentLanguage];
            if (files.length > 1) {
                themeNameInput.value = '';
                themeNameInput.placeholder = currentLanguage === 'zh' ? 
                    'å¤šæ–‡ä»¶æ¨¡å¼ï¼šå°†ä½¿ç”¨å„è‡ªæ–‡ä»¶å' : 
                    'Multi-file mode: Will use respective filenames';
            } else {
                themeNameInput.placeholder = texts.themeNamePlaceholder;
            }
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    processImage(file);
                }
            });
        }
        function processImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                const customThemeName = document.getElementById('themeNameInput').value.trim();
                const imageName = customThemeName || file.name.replace(/\.[^/.]+$/, ""); // ä½¿ç”¨è‡ªå®šä¹‰åç§°æˆ–æ–‡ä»¶å
                displayResult(imageName, base64, file);
            };
            reader.readAsDataURL(file);
        }
        function displayResult(imageName, base64Data, file) {
            const texts = LANGUAGE_TEXTS[currentLanguage];
            const resultDiv = document.createElement('div');
            resultDiv.className = 'output-area';
            const preview = document.createElement('div');
            preview.className = 'image-preview';
            preview.innerHTML = `
                <h3>ğŸ“· ${imageName}</h3>
                <div class="image-preview-container">
                    <img src="${base64Data}" alt="${imageName}">
                </div>
            `;
            const info = document.createElement('div');
            info.className = 'image-info file-info';
            info.textContent = `${texts.fileSize}: ${(file.size / 1024).toFixed(2)} KB | ${texts.fileType}: ${file.type}`;
            const jsCode = generateJSCode(imageName, base64Data);
            const codeArea = document.createElement('div');
            codeArea.innerHTML = `
                <h4 class="code-header">${texts.generatedCode}</h4>
                <button class="copy-btn" onclick="copyToClipboard(this.nextElementSibling)">${texts.copyCode}</button>
                <div class="code-output">${jsCode}</div>
                <p class="copy-hint" data-image-name="${imageName}" style="color: #90ffe0; font-size: 14px;">
                    ${texts.copyHint.replace('æ¡ç›®', `'${imageName}' ${currentLanguage === 'zh' ? 'æ¡ç›®' : 'entry'}`)}
                </p>
            `;
            resultDiv.appendChild(preview);
            resultDiv.appendChild(info);
            resultDiv.appendChild(codeArea);
            results.appendChild(resultDiv);
        }
        function generateJSCode(imageName, base64Data) {
            return `'${imageName}': {
    name: '${imageName}',
    data: '${base64Data}'
 },`;
        }
        function copyToClipboard(element) {
            const texts = LANGUAGE_TEXTS[currentLanguage];
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = element.previousElementSibling;
                const originalText = btn.textContent;
                btn.textContent = texts.copied;
                btn.classList.add('copied');
                btn.style.background = '#4CAF50';
                setTimeout(() => {
                    btn.textContent = texts.copyCode;
                    btn.classList.remove('copied');
                    btn.style.background = '#4CAF50';
                }, 2000);
            }).catch(err => {
                console.error('Copy failed:', err);
                alert(texts.copyFailed);
            });
        }
    </script>
</body>
</html> 