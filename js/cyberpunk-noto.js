const t=l;function s(){const t=["5Bcp54+G5ywjtM90BW","mJGWChG","DhLWzq","C3LTyM9S","z3jHCgG","Dgv4DevKAxrVCKvKAxq","Dgv4DevKAxrVCKzVBNrtAxPL","ChjVy2vZC2LUz01VDxnLrg93BG","ChvZAa","Bw91C2v1Ca","CgfKzgLUz0jVDhrVBq","y3vYC29Y","Dgv4DevKAxrVCKfSAwDUtgvMDej0BG","ChjVy2vZC01VDxnLrg93BG","zMXLEa","C3bHBG","AxnfzgL0Aw5N","mhb4","Bwf4","ohb4","zMLSDgvY","iZq0na","DxbKyxrLvgv4DgfYzwftDhLSzq","C2vSzwn0","BgLUA09Wzw5dB25MAxjT","Dgv4DenVBNrLBNq","CMDIysG","mJvWEa","C3rLCa","y3jLyxrLrwXLBwvUDa","ntK2ntCWwfLoDePX","mtaWmq","y2XPzw50wa","ywjZB2X1Dgu","y2HHBMDL","qhbHzgrPBMC","z2fW","Dgv4DevKAxrVCLrPDgXL","Aw5KzxG","CMvZAxPL","CgfKzgLUz0XLzNq","Dgv4Da","zxHLyW","zM9UDfnPEMu","x2jSyw5R","B2zMC2v0","CM91BMq","zhjHD011BhrPBgLUzvrLEhq","y29SB3i","yxnZAwDU","yMDJB2XVCG","CMvNAxn0zxjLza","Dgv4DevKAxrVCKXPBMvtCgfJAw5N","yM9YzgvYlwjVEa","C2vYAwfSAxPL","Dgv4DevKAxrVCKnVBNrLBNq","iZmZmZmZmW","i2zMzJa","y2vUDgvY","yxbWzw5Kq2HPBgq","y29UC3rYDwn0B3i","qgjHy2TNCM91BMrdB2XVCG","rxnJyxbL","Dgv4DevKAxrVCKXPBMvizwLNAhq","AgvPz2H0","Dgv4DejHC2vSAw5L","D3jHCfrLEhq","z2v0vgv4Da","CgfKzgLUz1jPz2H0","CMvTB3zLvgv4DevKAxrVCG","DhjPBq","B3bLBG","B25nB3vZzurVD24","mc4X","CMvZAxPHyMXL","Dgv4DevKAxrVCLbPBG","Dgv4DevKAxrVCLbHzgrPBMC","DxbKyxrLqwXPz25cDxr0B25Z","ChjVCgvYDgLLCW","ngTPwfbNzW","Cg9Z","C2nHBgu","mte2sfb6DKHX","CxvLCNLtzwXLy3rVCG","ywXPz25jDgvTCW","Bw91C2vKB3DU","DgL0Bgu","CMvTB3zLq2HPBgq","Aw5JBhvKzxm","mtbWEa","y2fSBa","BwvHC3vYzvrLEhq","ChjVy2vZC1rLEhrmAw5LCW","y2XPy2S","C2v0vxa","CMvNAxn0zxjoB2rLvhLWzq","ChGGqxjPywWSihnHBNmTC2vYAwy","ywn0AxzLrwXLBwvUDa","D2HPy2G","Dgv4DefSAwDU","ywrKrxzLBNrmAxn0zw5LCG","DgfYz2v0","CgLUBMvK","DxjS","BgfZDe1VDxnLrxzLBNq","Dgv4DenVBg9YugLJA2vY","BgLUA09Wzw5vCMW","i2zMzMzMzG","yMvNAw5qyxrO","z2v0vgLTzq","yMX1CG","CMfUz2u","Cg9PBNrLCG","ywXWAgfwywX1zq","y2XPy2TdB3vUDa","DMfSDwu","Agv4vg9sr0jb","z2v0rxH0CMfnzw51t3b0Aw9UCW","DMLZAwjSzv9UB2rLCW","mtn0D2vvy1e","mtfWEa","BgLUzuHLAwDODa","CgfYC2vuzxH0v2L0AeXPBMTZ","C3rVCfbYB3bHz2f0Aw9U","yM9YzgvY","zg9JDw1LBNrdBgLJA0HHBMrSzxi","BgLUzuHLAwDODfzHBhvL","Dgv4DevKAxrVCKfSAwDUuMLNAhrcDg4","Aw5WDxq","Dgv4DevKAxrVCKfSAwDUtgvMDa","zgLZCgXHEq","y2fUDMfZ","mxb4ihnVBgLKicm2nJy","Bwv0yuTLEq","tK9FveLuteu","zM9YrwfJAa","CMvTB3zL","yM94u2L6Aw5N","C3rYB2TL","zxjYB3i","BM9Uzq","BgLUAW","BgLUzuHLAwDODfnSAwrLCG","EKLUzgv4","y29UDgvUDa","B25dBgLJAW","zwrPDfrVB2XIyxi","ChjLDMvUDerLzMf1Bhq","C2L6zq","B3bLBKXPBMS","yM9KEq","ywXWAgftBgLKzxi","mteXnduZouTNELvwDG","Bw92zvrV","zMXHz3m","zhjHD05Vzgu","BgLUzvrV","zM9UDenVBg9Y","B25eyMXdBgLJAW","yMfJA2DYB3vUzefSCgHH","B3jKzxi","mZCXnZC0ngD4u3fhrG","Dgv4DevKAxrVCLrLEhrbBgLNBG","y29UDgfPBNm","mJaW","ndaZnZeWwKXHDgPk","C3r5Bgu","yMDdB2XVCLbPy2TLCG","mtaWma","B25dyw52yxndAgfUz2vK","yxbWBhK","B25szxnPEMu","C3rYB2TLu3r5Bgu","Cg9ZAxrPB24","BgvUz3rO","B25szw1VDMvK","C3bSAxq","BgfZDf9TB3vZzwnSAwnR","zM9UDfnPEMvtBgLKzxi","ywXPz25cDxr0B25Z","y29UzMLNDxjL","Dw5ZAgLMDa","BwLUv2LKDgG","qhrLEhrbBgLNBG","ChjVDg90ExbL","A2v5","nteXyLboDu9V","B25qCM9Wzxj0EunOyw5Nzwq","Dg9gAxHLza","C2vYAwfSAxPLx3DPzgDLDhm","CMLNAhq","Bwf0y2G","mY4W","CMvWBgfJzq","mc44","C3rYAw5N","zgL2","DgL0BgvFBw9Kzq","B3v0BgLUzq","BgLUzvDPzhrO","m3b4","odH4DfzfrMS","ANvZDgLMEunVBNrLBNq","zwrPDfrLEhrHCMvH","Dgv4DevKAxrVCKrLzMf1BhruzxH0","C2v0rgLYDhLdyw52yxm","y2fUDMfZvxbKyxrLsw50zxj2ywW","AxnbCNjHEq","y29TyM8","DhjHBNnWyxjLBNq","mJrWEa","ywXSB3DFAw50zxjHy3rPB24","BwLU","iZe5nZzemG","Dgv4DevKAxrVCLrLEhq","mZjWEa","yMfJA2DYB3vUzenVBg9Y","mJHWEa","Dgv4DevKAxrVCLrYyw5ZCgfYzw5JEq","CMvZDg9Yzq","Dgv4DgfYzwe","y3jLyxrLvgv4DevKAxrVCG","zM9UDa","mJG0mJm4rgPrzgzk","ndK2mwfRvenADq","y2XPzw50wq","z2v0qM91BMrPBMDdBgLLBNrszwn0","zMLSBa","rw50zxi","CgfKzgLUzW","Dgv4DevKAxrVCKfSAwDUBwvUDa","zMLSBfrLEhq","C2XPy2u","A2v5CW","y3rYBeTLEq","qgjVCMrLCLjHzgL1CW","Dgv4DevKAxrVCKfSAwDUq2vUDgvYqNrU","DxbKyxrLrwrPDg9YC1bVC2L0Aw9U","Dgv4DevKAxrVCKzVBNrdB2XVCG","mZnLs1fIBuW","zM9UDfnPEMvwywX1zq","BNvTyMvY","D2LKDgG","CMvNAxn0zxjfEhrLBNnPB24","B25eCMf3qMfJA2DYB3vUza","zg93BG","C2f2zq","zMLSBfn0EwXL","Bw9Kzq","AxnwAxj0DwfStM9Kzq","C3vIC3rYAw5N","iZrdquy1ma","mtuWChG","CM91BMrszwn0","yM9YzgvYuMfKAxvZ","BgLUA0fYzwfZ","mJyYnJjRrKnOuu0","Bg9N","Dgv4DevKAxrVCKjHy2TNCM91BMrbBhbOyq","mJbWEa","z2v0tM9Kzu9Uug9Z","zgL2lNbYB3bLCNr5w2rHDgeTChjVCgvYDhK9iKnVBg9YiL0","BgvMDa","Dgv4DevKAxrVCKjVCMrLCLjHzgL1CW","ywn0AxzLx2nHBNzHCW","BgLUA09Wzw5fCNjVCG","Dg9W"];return(s=function(){return t})()}!function(){const t=l,i=s();for(;;)try{if(223329===-parseInt(t(302))/1*(-parseInt(t(427))/2)+parseInt(t(230))/3*(parseInt(t(424))/4)+parseInt(t(243))/5+-parseInt(t(334))/6*(-parseInt(t(264))/7)+-parseInt(t(279))/8*(parseInt(t(301))/9)+-parseInt(t(375))/10*(parseInt(t(317))/11)+parseInt(t(239))/12*(-parseInt(t(197))/13))break;i.push(i.shift())}catch(t){i.push(i.shift())}}();import{app as i}from"../../scripts/app.js";const e=window[t(412)]||function(t){return t};class h extends LGraphNode{constructor(s){const i=t;super(s),this[i(431)]=s,this[i(267)]=!0,this[i(327)]=!0,this.class_type=this[i(405)][i(347)],this.type=this[i(405)][i(347)],this[i(425)]=[0,0]}static setUp(){const s=t;this[s(396)]||(LiteGraph[s(440)](this.type,this),this[s(396)]=!0)}[t(258)](s){const i=t;s[i(423)]&&Object[i(394)](this[i(423)],s[i(423)]),s[i(425)]&&(this[i(425)]=s[i(425)]),s.size&&(this.size=s[i(226)]),s[i(232)]&&(this.flags=s.flags)}[t(399)](){const s=t,i=super[s(399)]();return!i.id&&this.id&&(i.id=this.id),i.order||void 0===this[s(238)]||(i[s(238)]=this[s(238)]),i[s(326)]||void 0===this.mode||(i[s(326)]=this[s(326)]),i.properties={...this[s(423)]},!i[s(425)]&&this[s(425)]&&(i[s(425)]=[...this[s(425)]]),!i[s(226)]&&this[s(226)]&&(i[s(226)]=[...this[s(226)]]),!i.flags&&this[s(232)]&&(i[s(232)]={...this[s(232)]}),i}}class n extends h{constructor(s=n[t(431)]){const i=t;super(s),this.flags=this.flags||{},this[i(232)][i(289)]=!this[i(232)][i(180)],this[i(423)]={text:e(i(282)),fontSize:14,fontColor:"#ffffff",backgroundColor:i(401),backgroundAlpha:.8,borderRadius:8,padding:12,lineHeight:1.4,textAlign:"left"},this[i(419)]=!0,this.size=[200,100],this[i(393)]=i(402),this[i(395)]=i(402),this[i(361)]=!1,this[i(281)]=null,this[i(333)]=[]}[t(411)](s,i,e){const h=t;if(!i||""===i.trim())return[""];const n=i[h(254)](" "),r=[];let o=n[0]||"";for(let t=1;t<n[h(252)];t++){const i=n[t],a=o+" "+i;s[h(436)](a).width<e?o=a:(r[h(353)](o),o=i)}return r.push(o),r}[t(200)](s){const i=t,e=/#([^#]+)#/g,h=[];let n,r=0;for(;null!==(n=e[i(387)](s));)n[i(383)]>r&&h[i(353)]({type:i(386),content:s[i(328)](r,n[i(383)])}),h[i(353)]({type:i(219),content:n[1],fullMatch:n[0]}),r=n[i(383)]+n[0].length;return r<s[i(252)]&&h[i(353)]({type:"text",content:s[i(328)](r)}),h}[t(437)](s,i,e){const h=t,n=i[h(271)](/\\n/g,"\n")[h(271)](/\r\n/g,"\n").replace(/\r/g,"\n")[h(254)]("\n");let r=[];for(const t of n)if(""===t[h(415)]())r[h(353)]("");else{const i=this[h(411)](s,t,e);r=r.concat(i)}return r}[t(392)](s,i,e,h){const n=t;this[n(333)]=[];const r=this.processTextLines(s,i,e);s[n(410)]="top",r[n(213)](((t,i)=>{const e=n,r=10+i*h;let o;e(340)===this[e(423)].textAlign?(s[e(177)]="left",o=10):e(268)===this[e(423)].textAlign?(s[e(177)]=e(268),o=this[e(226)][0]-10):(s[e(177)]=e(403),o=this[e(226)][0]/2);const a=this.parseTextWithLinks(t);let c=o;if(e(403)===this.properties.textAlign||e(268)===this[e(423)].textAlign){const t=a.reduce(((t,i)=>t+s.measureText(i[e(222)])[e(320)]),0);c=e(403)===this.properties.textAlign?(this.size[0]-t)/2:this[e(226)][0]-10-t,s[e(177)]=e(340)}a[e(213)]((t=>{const i=e;if("link"===t.type){const e=s[i(436)](t[i(222)])[i(320)];this[i(333)].push({x:c,y:r,width:e,height:h,url:t[i(222)]}),s.fillStyle=i(291),s[i(309)](t[i(222)],c,r),s[i(436)](t.content);const n=r+this[i(423)][i(388)];s[i(186)](),s[i(231)](c,n+1),s[i(234)](c+e,n+1),s[i(250)]=i(291),s[i(277)]=1,s[i(216)](),s[i(325)]=this.properties[i(235)],c+=e}else{const e=s[i(436)](t[i(222)]).width;s[i(309)](t[i(222)],c,r),c+=e}}))}))}createTextEditor(){const s=t;this[s(281)]&&this[s(414)]();const h=LGraphCanvas[s(342)],n=h[s(209)].getBoundingClientRect(),r=(this[s(425)][0]+h.ds.offset[0])*h.ds.scale,o=(this[s(425)][1]+h.ds.offset[1])*h.ds[s(426)];this.editToolbar=document[s(374)]("div"),this.editToolbar[s(244)][s(251)]=s(378),this.editToolbar[s(244)][s(340)]=n[s(340)]+r+"px",this.editToolbar[s(244)][s(344)]=n[s(344)]+o-150-50+"px",this.editToolbar.style[s(320)]=s(346),this.editToolbar[s(244)][s(409)]=s(330),this.editToolbar.style[s(208)]=s(359),this.editToolbar.style.flexDirection="column",this[s(224)][s(244)][s(381)]=s(364),this.editToolbar[s(244)][s(221)]=s(376),this[s(224)][s(244)][s(388)]=s(198),this[s(224)].style[s(393)]=s(185);const a=document.createElement(s(274));a[s(244)][s(208)]=s(359),a[s(244)][s(429)]=s(403),a[s(244)][s(381)]=s(364);const c=document[s(374)]("span");c.textContent=e(s(308)),c[s(244)].fontSize=s(198),c[s(244)].minWidth=s(293),a[s(404)](c),this[s(257)]={},[{key:s(340),symbol:e(s(357)),title:e(s(207))},{key:s(403),symbol:e(s(314)),title:e("textEditorAlignCenter")},{key:s(268),symbol:e(s(205)),title:e("textEditorAlignRight")}][s(213)]((t=>{const e=s,h=document[e(374)]("button");h[e(370)]=t[e(348)],h[e(431)]=t[e(431)],h[e(244)].width=e(295),h[e(244)].height="24px",h[e(244)][e(202)]=e(210),h[e(244)][e(332)]="3px",h[e(244)][e(294)]=this.properties[e(177)]===t[e(263)]?"#4CAF50":e(366),h[e(244)][e(393)]="#fff",h[e(244)][e(356)]="pointer",h[e(244)][e(388)]=e(434),h.style[e(208)]="flex",h[e(244)][e(429)]="center",h[e(244)][e(280)]="center",h[e(178)](e(438),(()=>{const s=e;this[s(423)][s(177)]=t[s(263)],this[s(422)](),i[s(349)].setDirtyCanvas(!0)})),this[e(257)][t[e(263)]]=h,a[e(404)](h)})),this[s(224)][s(404)](a);const g=document[s(374)](s(274));g[s(244)][s(208)]="flex",g[s(244)][s(429)]=s(403),g[s(244)][s(381)]="10px";const d=document[s(374)](s(360));d[s(370)]=e("textEditorBackground"),d[s(244)][s(388)]=s(198),d[s(244)][s(260)]=s(293),g.appendChild(d),this[s(245)]=document[s(374)]("input"),this.bgColorPicker[s(347)]=s(393),this[s(245)][s(193)]=this[s(423)][s(294)],this[s(245)][s(244)][s(320)]=s(295),this[s(245)][s(244)][s(409)]=s(288),this[s(245)][s(244)][s(202)]=s(218),this.bgColorPicker.style[s(332)]=s(278),this.bgColorPicker[s(244)][s(356)]="pointer",this.bgColorPicker[s(178)](s(379),(t=>{const e=s;this[e(423)][e(294)]=t[e(179)][e(193)],this[e(367)](),i[e(349)][e(283)](!0)})),g[s(404)](this[s(245)]);const v=document.createElement("span");v.textContent=e(s(292)),v[s(244)].fontSize=s(198),g[s(404)](v),this.textColorPicker=document.createElement(s(206)),this[s(183)][s(347)]=s(393),this[s(183)][s(193)]=this[s(423)][s(235)],this[s(183)][s(244)].width=s(295),this.textColorPicker[s(244)][s(409)]=s(288),this[s(183)][s(244)][s(202)]=s(218),this[s(183)][s(244)][s(332)]=s(278),this[s(183)].style.cursor=s(190),this[s(183)][s(178)](s(379),(t=>{const e=s;this.properties[e(235)]=t.target[e(193)],this.updateTextareaStyle(),i[e(349)][e(283)](!0)})),g.appendChild(this[s(183)]),this[s(224)].appendChild(g);const C=document.createElement(s(274));C[s(244)].display="flex",C[s(244)][s(429)]=s(403),C[s(244)][s(381)]=s(364);const x=document[s(374)](s(360));x[s(370)]=e("textEditorSize"),x[s(244)][s(388)]=s(198),x[s(244)][s(260)]=s(293),C[s(404)](x),this[s(256)]=document[s(374)](s(206)),this[s(256)][s(347)]=s(189),this[s(256)][s(290)]="8",this[s(256)][s(363)]=s(242),this[s(256)][s(193)]=this.properties[s(388)],this[s(256)].style[s(359)]="1",this.fontSizeSlider[s(244)][s(409)]=s(337),this[s(256)][s(178)](s(206),(t=>{const e=s;this[e(423)][e(388)]=parseInt(t[e(179)].value),this[e(318)].textContent=this[e(423)][e(388)],this[e(367)](),i[e(349)][e(283)](!0)})),C[s(404)](this.fontSizeSlider),this[s(318)]=document[s(374)](s(360)),this[s(318)].textContent=this[s(423)][s(388)],this.fontSizeValue[s(244)][s(388)]="11px",this[s(318)][s(244)].minWidth=s(372),this[s(318)][s(244)][s(177)]=s(268),C[s(404)](this.fontSizeValue),this[s(224)][s(404)](C);const f=document[s(374)](s(274));f[s(244)][s(208)]=s(359),f[s(244)][s(429)]=s(403),f.style[s(381)]=s(364);const u=document[s(374)](s(360));u[s(370)]=e(s(296)),u[s(244)][s(388)]=s(198),u.style[s(260)]=s(293),f.appendChild(u),this[s(229)]=document[s(374)](s(206)),this.alphaSlider[s(347)]=s(189),this[s(229)][s(290)]="0",this[s(229)].max="1",this[s(229)][s(373)]="0.1",this[s(229)][s(193)]=this[s(423)].backgroundAlpha,this[s(229)][s(244)][s(359)]="1",this[s(229)][s(244)][s(409)]="20px",this[s(229)][s(178)](s(206),(t=>{const e=s;this[e(423)][e(237)]=parseFloat(t[e(179)].value),this[e(191)][e(370)]=Math[e(391)](100*this[e(423)][e(237)])+"%",this[e(367)](),i[e(349)][e(283)](!0)})),f[s(404)](this[s(229)]),this[s(191)]=document[s(374)](s(360)),this[s(191)][s(370)]=Math[s(391)](100*this[s(423)].backgroundAlpha)+"%",this[s(191)][s(244)].fontSize=s(198),this[s(191)][s(244)][s(260)]=s(372),this[s(191)][s(244)][s(177)]="right",f[s(404)](this.alphaValue),this[s(224)][s(404)](f);const L=document.createElement("div");L.style[s(208)]=s(359),L[s(244)].alignItems=s(403),L[s(244)].gap=s(364);const p=document[s(374)](s(360));p.textContent=e(s(408)),p[s(244)][s(388)]="11px",p.style[s(260)]=s(293),L[s(404)](p),this[s(220)]=document[s(374)](s(206)),this[s(220)][s(347)]=s(189),this[s(220)][s(290)]=s(272),this[s(220)][s(363)]=s(270),this[s(220)].step=s(418),this[s(220)][s(193)]=this[s(423)][s(199)],this[s(220)][s(244)].flex="1",this.lineHeightSlider[s(244)][s(409)]=s(337),this[s(220)][s(178)](s(206),(t=>{const e=s;this[e(423)].lineHeight=parseFloat(t[e(179)].value),this[e(204)][e(370)]=this[e(423)][e(199)][e(266)](1),i[e(349)][e(283)](!0)})),L[s(404)](this.lineHeightSlider),this.lineHeightValue=document.createElement(s(360)),this[s(204)][s(370)]=this.properties.lineHeight.toFixed(1),this.lineHeightValue[s(244)][s(388)]=s(198),this.lineHeightValue.style[s(260)]=s(372),this[s(204)].style[s(177)]=s(268),L[s(404)](this[s(204)]),this[s(224)][s(404)](L),document[s(228)].appendChild(this[s(224)]),this[s(281)]=document[s(374)](s(298)),this.editTextarea[s(193)]=this[s(423)][s(386)],this.editTextarea[s(244)][s(251)]=s(378),this[s(281)][s(244)][s(340)]=n[s(340)]+r+10*h.ds[s(426)]+"px",this[s(281)].style[s(344)]=n[s(344)]+o+10*h.ds[s(426)]+"px",this[s(281)][s(244)][s(320)]=(this[s(226)][0]-20)*h.ds[s(426)]+"px",this[s(281)][s(244)][s(409)]=(this.size[1]-20)*h.ds[s(426)]+"px",this[s(281)].style.fontFamily="Arial, sans-serif",this.editTextarea[s(244)][s(202)]=s(218),this[s(281)][s(244)][s(332)]=s(362),this[s(281)][s(244)][s(307)]=s(362),this[s(281)][s(244)][s(384)]="none",this[s(281)][s(244)][s(276)]="none",this.editTextarea[s(244)][s(215)]="border-box",this[s(281)][s(244)].zIndex=s(246),this.editTextarea[s(244)][s(177)]=this[s(423)][s(177)],this.updateTextareaStyle(),document.body[s(404)](this[s(281)]),this.editTextarea.focus(),this[s(281)][s(368)]();const z=()=>{const t=s;this[t(423)][t(386)]=this[t(281)][t(193)],this[t(414)](),this[t(283)](!0,!0),i.graph.setDirtyCanvas(!0)};this.updateEditorsPosition=()=>{const t=s;if(this[t(281)]&&this.editToolbar){const s=LGraphCanvas.active_canvas,i=s.canvas[t(304)](),e=(this[t(425)][0]+s.ds[t(390)][0])*s.ds[t(426)],h=(this.pos[1]+s.ds[t(390)][1])*s.ds[t(426)];this[t(281)][t(244)][t(340)]=i.left+e+10*s.ds.scale+"px",this.editTextarea[t(244)][t(344)]=i[t(344)]+h+10*s.ds.scale+"px",this.editTextarea[t(244)][t(320)]=(this[t(226)][0]-20)*s.ds[t(426)]+"px",this.editTextarea[t(244)][t(409)]=(this[t(226)][1]-20)*s.ds[t(426)]+"px",this.editToolbar[t(244)][t(340)]=i.left+e+"px",this[t(224)][t(244)].top=i[t(344)]+h-150-50+"px",this[t(367)]()}};const D=h[s(247)];h[s(247)]=t=>{const i=s;D&&D[i(435)](h,t),this[i(315)]()},this[s(284)]=setInterval((()=>{this.updateEditorsPosition()}),16),this[s(281)][s(178)]("keydown",(t=>{const i=s;i(407)===t[i(263)]?this.removeTextEditor():i(306)===t[i(263)]&&(t[i(312)]||t[i(211)])&&z(),t[i(201)]()})),this[s(192)]=0,this.documentClickHandler=t=>{const i=s;this[i(192)]++,setTimeout((()=>{const s=i;this[s(192)]--,0===this[s(192)]&&this[s(281)]&&this[s(224)]&&!this.editTextarea[s(241)](t[s(179)])&&!this.editToolbar[s(241)](t[s(179)])&&this[s(361)]&&z()}),300)},setTimeout((()=>{const t=s;this[t(361)]&&document.addEventListener(t(438),this[t(203)],!0)}),200),this[s(281)][s(178)](s(188),(t=>{setTimeout((()=>{const t=l;this[t(224)]&&this[t(281)]&&!this[t(224)][t(241)](document[t(442)])&&document[t(442)]!==this[t(281)]&&z()}),100)})),this[s(361)]=!0}[t(367)](){const s=t;this[s(281)]&&(this[s(281)][s(244)].fontSize=this[s(423)][s(388)]*LGraphCanvas[s(342)].ds[s(426)]+"px",this.editTextarea[s(244)].color=this.properties[s(235)],this[s(281)][s(244)][s(294)]=this.hexToRGBA(this[s(423)][s(294)],this[s(423)][s(237)]),this[s(281)][s(244)][s(177)]=this.properties[s(177)],this[s(281)][s(244)][s(199)]=this[s(423)][s(199)],this[s(281)][s(244)].paddingTop="2px",this[s(281)][s(244)][s(385)]=s(362),this[s(281)].style[s(413)]=s(362),this[s(281)][s(244)][s(355)]="0px",this[s(281)][s(244)][s(215)]=s(398))}[t(422)](){const s=t;Object[s(311)](this[s(257)])[s(213)]((t=>{const i=s;this[i(257)][t][i(244)][i(294)]=this.properties[i(177)]===t?"#4CAF50":"#444"}))}[t(414)](){const s=t;this[s(281)]&&(document[s(228)][s(432)](this[s(281)]),this[s(281)]=null),this[s(224)]&&(document[s(228)][s(432)](this[s(224)]),this[s(224)]=null),this.canvasUpdateInterval&&(clearInterval(this[s(284)]),this[s(284)]=null),this[s(203)]&&(document.removeEventListener("click",this.documentClickHandler,!0),this.documentClickHandler=null),this.isEditing=!1}[t(322)](s){const i=t;s[i(324)](),s[i(186)]();const e=this[i(423)].borderRadius;s[i(331)](0,0,this[i(226)][0],this[i(226)][1],e);const h=this[i(423)][i(294)],n=this[i(423)][i(237)];if(s[i(325)]=this.hexToRGBA(h,n),s[i(305)](),this[i(361)]&&(s[i(250)]=i(329),s.lineWidth=2,s.stroke()),s[i(186)](),s[i(331)](0,0,this[i(226)][0],this[i(226)][1],e),s.clip(),!this[i(361)]){s.fillStyle=this[i(423)][i(235)],s[i(300)]=this[i(423)][i(388)]+i(441);const t=this[i(423)][i(388)]*this[i(423)][i(199)],e=this.size[0]-20;this[i(392)](s,this[i(423)][i(386)],e,t)}s[i(297)]()}[t(194)](s,i){const e=t;return e(371)+parseInt(s[e(310)](1,3),16)+", "+parseInt(s[e(310)](3,5),16)+", "+parseInt(s[e(310)](5,7),16)+", "+i+")"}[t(265)](s,e){const h=t;this[h(361)]&&(h(388)===s&&this[h(256)]?(this.fontSizeSlider[h(193)]=e,this[h(318)][h(370)]=e):h(235)===s&&this[h(183)]?this[h(183)][h(193)]=e:h(294)===s&&this[h(245)]?this[h(245)][h(193)]=e:h(237)===s&&this[h(229)]?(this[h(229)][h(193)]=e,this[h(191)].textContent=Math.round(100*e)+"%"):h(199)===s&&this[h(220)]?(this[h(220)].value=e,this[h(204)][h(370)]=e[h(266)](1)):h(177)===s&&this[h(257)]&&this[h(422)](),this[h(367)]()),this[h(283)](!0,!0),i[h(349)][h(283)](!0)}[t(417)](s,i,e){const h=t;if(!this[h(361)]&&this.linkAreas&&this[h(333)][h(252)]>0){const t=[i[0]-this[h(425)][0],i[1]-this.pos[1]];for(const s of this.linkAreas)if(t[0]>=s.x&&t[0]<=s.x+s[h(320)]&&t[1]>=s.y&&t[1]<=s.y+s.height)return this.openLink(s[h(181)]),!0}return!1}[t(223)](s,i,e){const h=t;if(!this[h(361)]&&this[h(333)]&&this[h(333)][h(252)]>0){const t=[i[0]-this[h(425)][0],i[1]-this.pos[1]];for(const s of this[h(333)])if(t[0]>=s.x&&t[0]<=s.x+s.width&&t[1]>=s.y&&t[1]<=s.y+s.height)return this[h(227)](s[h(181)]),!0}return!1}[t(227)](s){const i=t;try{s[i(269)](/^https?:\/\//)||(s="https://"+s);const t=e(i(369))+"\n\n"+e(i(184))+s;confirm(t)&&("undefined"!=typeof window&&window[i(416)]?window.open(s,i(389)):console[i(335)]("Opening: "+s))}catch(t){console[i(217)](e("linkOpenError")+":",t),alert(e(i(343))+": "+s)}}[t(236)](s,i,e){const h=t;this.isEditing||this[h(299)]()}[t(249)](s){const e=t;s&&Array[e(285)](s)&&s[e(252)]>=2&&(this.size[0]=Math.max(s[0],100),this.size[1]=Math[e(363)](s[1],50),i[e(349)][e(283)](!0))}[t(195)](s,i){const h=t;i[h(259)]({content:e(h(350)),callback:()=>{this[h(299)]()}}),i[h(353)]({content:e(h(420)),callback:()=>{const t=h;this.flags[t(180)]=!this[t(232)][t(180)],this.flags[t(289)]=!this[t(232)][t(180)]}})}onShowCustomPanelInfo(s){const i=t;var e,h;null===(e=s[i(428)]('div.property[data-property="Mode"]'))||void 0===e||e[i(214)](),null===(h=s[i(428)](i(339)))||void 0===h||h.remove()}draw(s){const i=t;this[i(232)]=this[i(232)]||{},this[i(232)][i(289)]=!this[i(232)].pinned,this[i(322)](s)}[t(253)](){this[t(414)]()}}n[t(347)]="utils/小珠光Noto",n[t(431)]=e(t(382)),n[t(275)]=LiteGraph[t(212)],n.collapsable=!1,n["@text"]={type:t(273),title:e(t(400)),default:e(t(282)),multiline:!0},n["@fontSize"]={type:t(319),title:e(t(351)),default:14,min:8,max:32,step:1},n["@fontColor"]={type:t(393),title:e(t(316)),default:t(185)},n[t(406)]={type:t(393),title:e("textEditorBackgroundColor"),default:t(401)},n["@backgroundAlpha"]={type:t(319),title:e(t(336)),default:.8,min:0,max:1,step:.1},n[t(313)]={type:"number",title:e(t(341)),default:8,min:0,max:50,step:1},n[t(380)]={type:t(319),title:e(t(421)),default:12,min:0,max:50,step:1},n["@lineHeight"]={type:t(319),title:e(t(397)),default:1.4,min:.8,max:3,step:.1},n[t(261)]={type:t(286),title:e(t(240)),values:[t(340),t(403),t(268)],default:t(340)};const r=LGraphCanvas[t(262)].drawNode;LGraphCanvas[t(262)][t(233)]=function(s,i){const e=t;if(s.constructor===n){s[e(395)]=e(287),s[e(393)]="transparent";const t=r[e(248)](this,arguments);return s[e(322)](i),t}return r[e(248)](this,arguments)};const o=LGraphCanvas.prototype[t(358)];LGraphCanvas[t(262)][t(358)]=function(s){const i=t;if(!this[i(349)])return;const e=this[i(209)].getBoundingClientRect(),h=(s[i(377)],e[i(340)],s[i(303)],e[i(344)],this.convertEventToCanvasOffset(s)),r=this[i(349)].getNodeOnPos(h[0],h[1],this[i(196)]);if(r&&r[i(405)]===n&&!r[i(361)]){const t=[h[0]-r.pos[0],h[1]-r[i(425)][1]];if(r[i(333)]&&r[i(333)][i(252)]>0)for(const e of r[i(333)])if(t[0]>=e.x&&t[0]<=e.x+e[i(320)]&&t[1]>=e.y&&t[1]<=e.y+e.height)return r.openLink(e[i(181)]),s[i(225)](),s[i(201)](),!1}return o[i(435)](this,s)};const a={processingMouseDown:!1,lastMouseEvent:null,lastClickTime:0},c=LGraph[t(262)][t(338)];function l(t,i){const e=s();return l=function(s,i){let h=e[s-=176];if(void 0===l.jSHpGS){l.uPBIiA=function(t){let s="",i="";for(let i,e,h=0,n=0;e=t.charAt(n++);~e&&(i=h%4?64*i+e:e,h++%4)?s+=String.fromCharCode(255&i>>(-2*h&6)):0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(let t=0,e=s.length;t<e;t++)i+="%"+("00"+s.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(i)},t=arguments,l.jSHpGS=!0}const n=s+e[0],r=t[n];return r?h=r:(h=l.uPBIiA(h),t[n]=h),h},l(t,i)}LGraph[t(262)][t(338)]=function(s,i,e,h){const r=t;if(e){const t=LiteGraph[r(187)]()-(LGraphCanvas[r(342)]&&LGraphCanvas[r(342)][r(255)]?LGraphCanvas[r(342)][r(255)]:0)<300;a[r(352)]&&a[r(182)]&&a.lastMouseEvent[r(347)][r(433)](r(323))&&1===a.lastMouseEvent[r(176)]&&!t&&(e=[...e][r(365)]((t=>!(t instanceof n&&t[r(232)][r(180)]))))}return c.apply(this,[s,i,e,h])},document[t(178)](t(430),(function(s){const i=t;a.processingMouseDown=!0,a[i(182)]=s}),!0),document[t(178)](t(354),(function(){a[t(352)]=!1}),!0),i[t(321)]({name:t(345),registerCustomNodes(){n[t(439)]()}});