const t=a;!function(){const t=a,s=o();for(;;)try{if(910403===parseInt(t(519))/1*(-parseInt(t(527))/2)+-parseInt(t(508))/3+parseInt(t(583))/4*(-parseInt(t(521))/5)+-parseInt(t(539))/6+-parseInt(t(524))/7+parseInt(t(529))/8+parseInt(t(549))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}();import{app as s}from"../../scripts/app.js";class i extends LGraphNode{constructor(t){const s=a;super(t),this[s(520)]=t,this[s(504)]=!0,this.isVirtualNode=!0,this[s(517)]=this.constructor.type,this[s(494)]=this[s(526)][s(494)],this[s(554)]=[0,0]}static setUp(){const t=a;this.registered||(LiteGraph[t(498)](this[t(494)],this),this[t(552)]=!0)}[t(532)](s){const i=t;s[i(570)]&&Object[i(533)](this[i(570)],s.properties),s[i(554)]&&(this[i(554)]=s[i(554)]),s.size&&(this[i(545)]=s[i(545)]),s[i(534)]&&(this[i(534)]=s[i(534)])}serialize(){const s=t,i=super.serialize();return!i.id&&this.id&&(i.id=this.id),i[s(548)]||void 0===this[s(548)]||(i[s(548)]=this.order),i[s(481)]||void 0===this.mode||(i[s(481)]=this[s(481)]),i.properties={...this.properties},!i[s(554)]&&this[s(554)]&&(i[s(554)]=[...this.pos]),!i.size&&this[s(545)]&&(i[s(545)]=[...this[s(545)]]),!i[s(534)]&&this.flags&&(i[s(534)]={...this[s(534)]}),i}}class e extends i{constructor(i=e[t(520)]){const n=t;super(i),this[n(534)]=this[n(534)]||{},this.flags[n(588)]=!this[n(534)][n(535)],this[n(570)]={imageUrl:"",previewSize:256,fontSize:12,fontFamily:n(581),fontColor:n(474),backgroundColor:"#333333",backgroundAlpha:.8,borderRadius:8,padding:8,waitingText:n(562),loadingText:"加载中..."},this.img=new Image,this.img[n(585)]=()=>{const t=n,i=this.img[t(511)],e=this[t(567)][t(587)],h=this.properties[t(531)]/Math[t(561)](i,e);this[t(545)]=[Math[t(501)](i*h),Math.round(e*h)],this[t(525)]&&this[t(525)](this.size),s[t(558)][t(544)](!0)},this[n(469)]=!0,this[n(545)]=[256,256],this[n(556)]=!1,this[n(578)]=n(586),this[n(560)]=n(586),this[n(555)]=null}[t(591)](s){const i=t;if(!this[i(556)]&&this[i(570)][i(480)]){const t=this[i(570)][i(480)][i(563)]();if(t.startsWith(i(564))||t[i(470)](i(579)))this[i(567)].src=t;else try{let s=t;t[i(574)]("base64,")?this.img.src=t:(s=s[i(471)](/[\n\r]/g,""),this[i(567)][i(487)]=i(518)+s)}catch(t){console[i(473)](i(547),t),this[i(555)]=i(514)}this[i(556)]=!0}s[i(582)](),s[i(580)]();const e=this[i(570)][i(568)],n=this[i(570)].padding;s.roundRect(0,0,this[i(545)][0],this[i(545)][1],e);const h=this.properties[i(499)],r=this[i(570)].backgroundAlpha;if(s[i(528)]=this[i(486)](h,r),s.fill(),s[i(513)](),this[i(567)][i(523)]&&0!==this.img[i(511)]){const t=this[i(567)][i(511)]/this[i(567)][i(587)];let e=this[i(570)][i(531)]-2*n,h=this.properties[i(531)]-2*n;t>1?h=e/t:e=h*t;const r=(this[i(545)][0]-e)/2,o=(this.size[1]-h)/2;try{s.drawImage(this[i(567)],r,o,e,h)}catch(t){console[i(473)](i(573),t)}}else s[i(528)]=this[i(570)][i(538)],s.font=this[i(570)][i(557)]+"px "+this[i(570)][i(572)],s[i(468)]=i(472),s[i(550)](this[i(555)]||(this[i(570)][i(480)]?this[i(570)][i(485)]:this[i(570)][i(507)]),this[i(545)][0]/2,this.size[1]/2);s.restore()}[t(486)](s,i){const e=t;return e(465)+parseInt(s.slice(1,3),16)+", "+parseInt(s[e(462)](3,5),16)+", "+parseInt(s[e(462)](5,7),16)+", "+i+")"}[t(543)](i,e){const n=t;if(n(480)===i)this[n(556)]=!1,this.img.src="",this[n(555)]=null,s[n(558)][n(544)](!0);else if("previewSize"===i){if(this[n(567)].complete&&0!==this[n(567)].naturalWidth){const t=this.img[n(511)],s=this.img[n(587)],i=e/Math.max(t,s);this.size=[Math[n(501)](t*i),Math[n(501)](s*i)]}else this.size=[e,e];this[n(525)]&&this[n(525)](this[n(545)]),s[n(558)][n(544)](!0)}else s[n(558)][n(544)](!0)}[t(546)](s,i,e){const n=t;LGraphCanvas[n(584)][n(489)](this)}[t(525)](i){const e=t;if(i&&Array[e(553)](i)&&i[e(478)]>=2){this[e(545)][0]=Math.max(i[0],50),this[e(545)][1]=Math[e(561)](i[1],50);const t=Math[e(561)](this.size[0],this[e(545)][1]);this[e(570)][e(531)]=t,s[e(558)].setDirtyCanvas(!0)}}[t(497)](s,i){const e=t;i[e(551)]({content:e(589),submenu:{options:[{content:"128x128",callback:()=>{const t=e;this.properties.previewSize=128,this[t(543)]("previewSize",128)}},{content:e(466),callback:()=>{const t=e;this[t(570)].previewSize=256,this[t(543)](t(531),256)}},{content:e(491),callback:()=>{const t=e;this[t(570)][t(531)]=512,this[t(543)]("previewSize",512)}}]}}),i[e(496)]({content:"固定节点",callback:()=>{const t=e;this.flags[t(535)]=!this[t(534)][t(535)],this[t(534)].allow_interaction=!this[t(534)][t(535)]}})}[t(571)](s){const i=t;var e,n;null===(e=s[i(590)](i(515)))||void 0===e||e[i(530)](),null===(n=s.querySelector(i(505)))||void 0===n||n[i(530)]()}[t(467)](s){const i=t;this[i(534)]=this[i(534)]||{},this.flags.allow_interaction=!this[i(534)].pinned,this[i(591)](s)}}e[t(494)]="2🐕/CYBERPUNK",e[t(520)]="图像链接预览",e[t(476)]=LiteGraph.NO_TITLE,e[t(540)]=!1,e[t(488)]={type:t(479),title:"图像链接"},e[t(566)]={type:t(592),title:t(483),default:256,min:64,max:1024,step:1},e[t(577)]={type:t(592),title:t(565),default:12,min:8,max:32,step:1},e[t(460)]={type:t(479),title:"字体",default:"Arial"},e["@fontColor"]={type:t(578),title:"字体颜色",default:t(474)},e["@backgroundColor"]={type:t(578),title:t(493),default:t(477)},e[t(506)]={type:t(592),title:t(541),default:0,min:0,max:1,step:.1},e[t(537)]={type:t(592),title:t(484),default:8,min:0,max:50,step:1},e[t(512)]={type:t(592),title:t(500),default:8,min:0,max:50,step:1},e[t(461)]={type:"string",title:"等待提示文字",default:t(562)},e[t(503)]={type:t(479),title:t(475),default:t(464)};const n=LGraphCanvas[t(502)][t(569)];LGraphCanvas[t(502)][t(569)]=function(s,i){const h=t;if(s[h(526)]===e){s[h(560)]=h(542),s.color="transparent";const t=n.apply(this,arguments);return s[h(591)](i),t}return n[h(482)](this,arguments)};const h={processingMouseDown:!1,lastMouseEvent:null,lastClickTime:0},r=LGraph.prototype.getNodeOnPos;function o(){const t=["zgL2lNbYB3bLCNr5w2rHDgeTChjVCgvYDhK9iK1VzguIxq","mVcFKjuUvvjmuhjLDMLLDW","y2XHC3nFDhLWzq","zgf0ytPPBwfNzs9WBMC7yMfZzty0la","mtjRrvjoA0G","DgL0Bgu","ndu3ntvHvKT3uLa","BgfZDe1VDxnLrxzLBNq","y29TCgXLDgu","otm5nJC0ne5tDKrMva","B25szxnPEMu","y29UC3rYDwn0B3i","mZKZndbrzNzZu0i","zMLSBfn0EwXL","mJu5mdy3mLjmt2jKBa","CMvTB3zL","ChjLDMLLD1nPEMu","y29UzMLNDxjL","yxnZAwDU","zMXHz3m","CgLUBMvK","z2v0tM9Kzu9Uug9Z","qgjVCMrLCLjHzgL1CW","zM9UDenVBg9Y","nZqZmZq0mKzJy3bYBq","y29SBgfWC2fIBgu","6iom5PMV6ycp5PIo5BQM","DhjHBNnWyxjLBNq","B25qCM9Wzxj0EunOyw5Nzwq","C2v0rgLYDhLdyw52yxm","C2L6zq","B25eyMXdBgLJAW","qMfZzty06kEJ56cb5AsX6lsLoG","B3jKzxi","ndi2nJC1mZnbyNPVvu0","zMLSBfrLEhq","Dw5ZAgLMDa","CMvNAxn0zxjLza","AxnbCNjHEq","Cg9Z","Bg9HzevYCM9Y","Aw1Hz2vmB2fKzwq","zM9UDfnPEMu","z3jHCgG","D2HPy2G","yMDJB2XVCG","Bwf4","562j5B6f5zU+5yop6zo+5O6L5OIwqMfZzty0lI4U","DhjPBq","Ahr0CdOVlW","5A2x5l2t5AsN5Bcp","qhbYzxzPzxDtAxPL","Aw1N","yM9YzgvYuMfKAxvZ","zhjHD05Vzgu","ChjVCgvYDgLLCW","B25tAg93q3vZDg9TugfUzwXjBMzV","zM9UDezHBwLSEq","5zU+5yop57Uy5yI25AsX6lsLoG","Aw5JBhvKzxm","zMLSDgvY","Bw91C2vKB3DU","qgzVBNrtAxPL","y29SB3i","Ahr0Chm6lY8","yMvNAw5qyxrO","qxjPywW","C2f2zq","mta4sNrcu2nj","ywn0AxzLx2nHBNzHCW","B25SB2fK","i2zMzJa","BMf0DxjHBeHLAwDODa","ywXSB3DFAw50zxjHy3rPB24","6k6+572U6Ake6kEi5AsN5Bcp","CxvLCNLtzwXLy3rVCG","B25eCMf3qMfJA2DYB3vUza","BNvTyMvY","qgzVBNrgyw1PBhK","qhDHAxrPBMDuzxH0","C2XPy2u","ywrKrxzLBNrmAxn0zw5LCG","5yQG6l295lITlI4U","CMDIysG","mJu2Edi1nG","zhjHDW","Dgv4DefSAwDU","CMvZAxPHyMXL","C3rHCNrZv2L0Aa","CMvWBgfJzq","y2vUDgvY","zxjYB3i","i2zMzMzMzG","5yQG6l295O+q56s65PAh5A2x","DgL0BgvFBw9Kzq","iZmZmZmZmW","BgvUz3rO","C3rYAw5N","Aw1Hz2vvCMW","Bw9Kzq","yxbWBhK","6Ake6kEi5AsN5Bcp","5zYg6kEs5AsN5Bcp","Bg9HzgLUz1rLEhq","Agv4vg9sr0jb","C3jJ","qgLTywDLvxjS","C2HVD1nOB3DoB2rLugfUzwW","zg93BG","nteYEduXmG","ChjVy2vZC2LUz01VDxnLrg93BG","6iom5PMV6AkC6iMY","DhLWzq","BgfZDf9TB3vZzwnSAwnR","ChvZAa","z2v0rxH0CMfnzw51t3b0Aw9UCW","CMvNAxn0zxjoB2rLvhLWzq","yMfJA2DYB3vUzenVBg9Y","5yAf6l656lED","CM91BMq","ChjVDg90ExbL","qgXVywrPBMDuzxH0","C2vYAwfSAxPLx3DPzgDLDhm","zgL2lNbYB3bLCNr5w2rHDgeTChjVCgvYDhK9iKnVBg9YiL0","qgjHy2TNCM91BMrbBhbOyq","D2fPDgLUz1rLEhq","mZi2otu1nKzSwwzwrq","Bw91C2v1Ca","z2v0vgLTzq","BMf0DxjHBfDPzhrO","qhbHzgrPBMC","y2XPCa","qMfZzty06kEJ56cb5AsX6lsL"];return(o=function(){return t})()}function a(t,s){const i=o();return a=function(s,e){let n=i[s-=460];if(void 0===a.yhEnlP){a.ANoKLf=function(t){let s="",i="";for(let i,e,n=0,h=0;e=t.charAt(h++);~e&&(i=n%4?64*i+e:e,n++%4)?s+=String.fromCharCode(255&i>>(-2*n&6)):0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(let t=0,e=s.length;t<e;t++)i+="%"+("00"+s.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(i)},t=arguments,a.yhEnlP=!0}const h=s+i[0],r=t[h];return r?n=r:(n=a.ANoKLf(n),t[h]=n),n},a(t,s)}LGraph[t(502)][t(536)]=function(s,i,n,o){const a=t;if(n){const t=LiteGraph[a(510)]()-LGraphCanvas[a(584)][a(495)]<300;h.processingMouseDown&&h.lastMouseEvent&&h[a(522)][a(494)][a(574)](a(490))&&1===h[a(522)][a(559)]&&!t&&(n=[...n][a(575)]((t=>!(t instanceof e&&t[a(534)][a(535)]))))}return r[a(482)](this,[s,i,n,o])},document[t(463)](t(576),(function(s){const i=t;h.processingMouseDown=!0,h[i(522)]=s}),!0),document[t(463)](t(509),(function(){h[t(492)]=!1}),!0),s.registerExtension({name:t(516),registerCustomNodes(){e.setUp()}});